- name: Deploy to temporary directory on server
uses: SamKirkland/FTP-Deploy-Action@v4.3.4
with:
  server: ${{ secrets.FTP_SERVER }}
  username: ${{ secrets.FTP_USERNAME }}
  password: ${{ secrets.FTP_PASSWORD }}
  local-dir: ./.output/public/
  server-dir: /temp-deploy/
  exclude: |
    **/.git*
    **/.git*/**
    **/node_modules/**
  log-level: minimal

- name: Switch directories via FTP
uses: SamKirkland/FTP-Deploy-Action@v4.3.4
with:
  server: ${{ secrets.FTP_SERVER }}
  username: ${{ secrets.FTP_USERNAME }}
  password: ${{ secrets.FTP_PASSWORD }}
  local-dir: /temp-deploy/
  server-dir: /
  exclude: |
    **/.git*
    **/.git*/**
    **/node_modules/**
  log-level: minimal

- name: Clean up temporary directory
uses: SamKirkland/FTP-Deploy-Action@v4.3.4
with:
  server: ${{ secrets.FTP_SERVER }}
  username: ${{ secrets.FTP_USERNAME }}
  password: ${{ secrets.FTP_PASSWORD }}
  server-dir: /temp-deploy/
  action: delete
  log-level: minimal
